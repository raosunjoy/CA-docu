
> zetra-platform@1.0.0 dev
> next dev

   â–² Next.js 15.4.5
   - Local:        http://localhost:3000
   - Network:      http://192.168.29.252:3000
   - Environments: .env
   - Experiments (use with caution):
     âœ“ optimizeCss
     Â· optimizePackageImports

 âœ“ Starting...
 âœ“ Ready in 1492ms
 â—‹ Compiling /api/auth/login ...
 âœ“ Compiled /api/auth/login in 584ms (496 modules)
prisma:query SELECT "public"."users"."id", "public"."users"."organizationId", "public"."users"."email", "public"."users"."passwordHash", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."role"::text, "public"."users"."isActive", "public"."users"."lastLoginAt", "public"."users"."createdAt", "public"."users"."updatedAt" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."organizations"."id", "public"."organizations"."name" FROM "public"."organizations" WHERE "public"."organizations"."id" IN ($1) OFFSET $2
prisma:query UPDATE "public"."users" SET "lastLoginAt" = $1, "updatedAt" = $2 WHERE ("public"."users"."id" = $3 AND 1=1) RETURNING "public"."users"."id", "public"."users"."organizationId", "public"."users"."email", "public"."users"."passwordHash", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."role"::text, "public"."users"."isActive", "public"."users"."lastLoginAt", "public"."users"."createdAt", "public"."users"."updatedAt"
prisma:error 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    organizationId: "cme247vgs0000xk0p3vvag14b",
    userId: "cme247vpi0002xk0ppw0543yt",
    action: "login",
    resourceType: "user",
    resourceId: "cme247vpi0002xk0ppw0543yt",
    newValues: {
      deviceId: "enterprise",
      ip: "::1",
      userAgent: "curl/8.7.1"
    },
    ipAddress: "::1",
    userAgent: "curl/8.7.1",
+   category: AuditCategory
  }
}

Argument `category` is missing.
Login error: Error [PrismaClientValidationError]: 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    organizationId: "cme247vgs0000xk0p3vvag14b",
    userId: "cme247vpi0002xk0ppw0543yt",
    action: "login",
    resourceType: "user",
    resourceId: "cme247vpi0002xk0ppw0543yt",
    newValues: {
      deviceId: "enterprise",
      ip: "::1",
      userAgent: "curl/8.7.1"
    },
    ipAddress: "::1",
    userAgent: "curl/8.7.1",
+   category: AuditCategory
  }
}

Argument `category` is missing.
    at async POST (src/app/api/auth/login/route.ts:103:4)
  101 |
  102 |     // Create audit log entry
> 103 |     await prisma.auditLog.create({
      |    ^
  104 |       data: {
  105 |         organizationId: user.organizationId,
  106 |         userId: user.id, {
  clientVersion: '6.13.0'
}
 POST /api/auth/login 500 in 1230ms
 âœ“ Compiled in 27ms
 âœ“ Compiled /api/auth/login in 150ms (310 modules)
prisma:query SELECT "public"."users"."id", "public"."users"."organizationId", "public"."users"."email", "public"."users"."passwordHash", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."role"::text, "public"."users"."isActive", "public"."users"."lastLoginAt", "public"."users"."createdAt", "public"."users"."updatedAt" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."organizations"."id", "public"."organizations"."name" FROM "public"."organizations" WHERE "public"."organizations"."id" IN ($1) OFFSET $2
prisma:query UPDATE "public"."users" SET "lastLoginAt" = $1, "updatedAt" = $2 WHERE ("public"."users"."id" = $3 AND 1=1) RETURNING "public"."users"."id", "public"."users"."organizationId", "public"."users"."email", "public"."users"."passwordHash", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."role"::text, "public"."users"."isActive", "public"."users"."lastLoginAt", "public"."users"."createdAt", "public"."users"."updatedAt"
prisma:error 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    organizationId: "cme247vgs0000xk0p3vvag14b",
    userId: "cme247vpi0002xk0ppw0543yt",
    action: "LOGIN",
    category: "AUTHENTICATION",
    description: "User Rajesh Sharma logged in",
    resourceType: "user",
    resourceId: "cme247vpi0002xk0ppw0543yt",
    newValues: {
      deviceId: "enterprise",
      ip: "::1",
      userAgent: "curl/8.7.1"
    },
    ipAddress: "::1",
    userAgent: "curl/8.7.1",
+   occurredAt: DateTime
  }
}

Argument `occurredAt` is missing.
Login error: Error [PrismaClientValidationError]: 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    organizationId: "cme247vgs0000xk0p3vvag14b",
    userId: "cme247vpi0002xk0ppw0543yt",
    action: "LOGIN",
    category: "AUTHENTICATION",
    description: "User Rajesh Sharma logged in",
    resourceType: "user",
    resourceId: "cme247vpi0002xk0ppw0543yt",
    newValues: {
      deviceId: "enterprise",
      ip: "::1",
      userAgent: "curl/8.7.1"
    },
    ipAddress: "::1",
    userAgent: "curl/8.7.1",
+   occurredAt: DateTime
  }
}

Argument `occurredAt` is missing.
    at async POST (src/app/api/auth/login/route.ts:103:4)
  101 |
  102 |     // Create audit log entry
> 103 |     await prisma.auditLog.create({
      |    ^
  104 |       data: {
  105 |         organizationId: user.organizationId,
  106 |         userId: user.id, {
  clientVersion: '6.13.0'
}
 POST /api/auth/login 500 in 623ms
[?25h
